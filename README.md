# ü§ñ Page Analyzer Bot

Telegram-–±–æ—Ç –Ω–∞ Node.JS. –§—Ä–æ–Ω—Ç –¥–ª—è –æ–±—â–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å —Å–µ—Ä–≤–∏—Å–æ–º. 

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

- [üõ†Ô∏è –°—Ç–µ–∫](#stack)
- [‚öôÔ∏è –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è](#requirements)
- [üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç](#quick-start)
- [‚ñ∂Ô∏è –ó–∞–ø—É—Å–∫ –∏ –æ—Å—Ç–∞–Ω–æ–≤–∫–∞](#run)
    - [Makefile](#makefile)
    - [Docker](#docker)
- [üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è](#license)

<a id="stack"></a>
## üõ†Ô∏è –°—Ç–µ–∫

  Node.js (v22.2.0), TypeScript  
* **Telegram API:** Grammy
* **–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è:** Docker, Docker Compose

<a id="requirements"></a>
## ‚öôÔ∏è –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

–î–ª—è –∑–∞–ø—É—Å–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã:

* [Git](https://git-scm.com/)  
* [Docker](https://www.docker.com/) (–≤–µ—Ä—Å–∏—è 20.10+)  
* [Docker Compose](https://docs.docker.com/compose/) (–≤–µ—Ä—Å–∏—è 2.10+)

* _–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ_: make (–¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞, —Å–æ–≤—Å–µ–º –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)

‚úÖ **–ü—Ä–æ–≤–µ—Ä–µ–Ω–æ –Ω–∞:** Docker Engine 27.0.3

üí° **–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Node.js –Ω–∞ –ª–æ–∫–∞–ª—å–Ω—É—é –º–∞—à–∏–Ω—É –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è, —Ç–∞–∫ –∫–∞–∫ –ø—Ä–æ–µ–∫—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—Ç–∞–µ—Ç –≤–Ω—É—Ç—Ä–∏ Docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤.


<a id="quick-start"></a>
## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

1. **–°–∫–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π** 

2. **–°–æ–∑–¥–∞–π—Ç–µ –∏ –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ `.env`**  
   –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª `.env-example`
   ```bash
   cp .env-example .env
   ```
   –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∑–Ω–∞—á–µ–Ω–∏—è


<a id="run"></a>
## ‚ñ∂Ô∏è –ó–∞–ø—É—Å–∫ –∏ –æ—Å—Ç–∞–Ω–æ–≤–∫–∞
<a id="makefile"></a>
### Makefile (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
```bash
make help # –ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã
```
```bash
# --- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ DEV-–æ–∫—Ä—É–∂–µ–Ω–∏–µ–º (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é) ---
make up       # –ó–∞–ø—É—Å—Ç–∏—Ç—å DEV-–æ–∫—Ä—É–∂–µ–Ω–∏–µ
make down     # –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏ —É–¥–∞–ª–∏—Ç—å –≤—Å—ë (–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã, —Ç–æ–º–∞, —Å–µ—Ç–∏)
make logs     # –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏
make ps       # –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å—Ç–∞—Ç—É—Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
make restart  # –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–∏—Å—ã
make build    # –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å –æ–±—Ä–∞–∑—ã
make clean    # –ü–æ–ª–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞, –≤–∫–ª—é—á–∞—è Docker-–æ–±—Ä–∞–∑—ã
```
```bash
# --- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ PROD-–æ–∫—Ä—É–∂–µ–Ω–∏–µ–º ---
make up ENV=prod       # –ó–∞–ø—É—Å—Ç–∏—Ç—å PROD-–æ–∫—Ä—É–∂–µ–Ω–∏–µ
make down ENV=prod     # –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏ —É–¥–∞–ª–∏—Ç—å –≤—Å—ë –¥–ª—è PROD
make logs ENV=prod     # –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏ PROD
make ps ENV=prod       # –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å—Ç–∞—Ç—É—Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ PROD
```
```bash
# --- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã ---
make shell srv=service_name # –ó–∞–π—Ç–∏ –≤ shell —Å–µ—Ä–≤–∏—Å–∞, –Ω–∞–ø—Ä–∏–º–µ—Ä srv=bot
```


----
<a id="docker-run"></a>
### Docker

**1. –ó–∞–ø—É—Å–∫ –æ–∫—Ä—É–∂–µ–Ω–∏—è** 
* **DEV-–æ–∫—Ä—É–∂–µ–Ω–∏–µ:** `docker compose` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥—Ö–≤–∞—Ç–∏—Ç —Ñ–∞–π–ª—ã `docker-compose.yml` –∏ `docker-compose.override.yml`.
	```bash
	docker compose up --build -d
	```

* **PROD-–æ–∫—Ä—É–∂–µ–Ω–∏–µ:** –ó–¥–µ—Å—å –Ω—É–∂–Ω–æ —è–≤–Ω–æ —É–∫–∞–∑–∞—Ç—å, —á—Ç–æ –º—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –¥–ª—è –ø—Ä–æ–¥–∞
	```bash
	docker compose -f docker-compose.yml -f docker-compose.prod.yml up --build -d
	```


**üñ•Ô∏è ARM64:** –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º Apple Silicon –∏ –ª—é–±—ã—Ö –¥—Ä—É–≥–∏—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤ –Ω–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ **ARM64** –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤—Ä—É—á–Ω—É—é –¥–æ–±–∞–≤–ª—è—Ç—å —Ñ–∞–π–ª `docker-compose.arm64.yml` –∫ –∫–æ–º–∞–Ω–¥–∞–º

–ü—Ä–∏–º–µ—Ä DEV –Ω–∞ ARM64:
```bash
docker compose -f docker-compose.yml -f docker-compose.override.yml -f docker-compose.arm64.yml up --build -d
```

**2. –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è**
 
 –î–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –∏ —É–¥–∞–ª–µ–Ω–∏—è –≤—Å–µ—Ö —Ä–µ—Å—É—Ä—Å–æ–≤ (–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã, —Å–µ—Ç–∏, —Ç–æ–º–∞) –≤–∞–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–µ –∂–µ -f —Ñ–ª–∞–≥–∏, —á—Ç–æ –∏ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ.

* **–û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å DEV:**
    ```bash
	docker compose down -v 
	```

* **–û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å PROD:**
	```bash
	docker compose -f docker-compose.yml -f docker-compose.prod.yml down -v
	```

* **–û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å DEV –Ω–∞ ARM64:**
	```bash 
	docker compose -f docker-compose.yml -f docker-compose.override.yml -f docker-compose.arm64.yml down -v
	```

<a id="license"></a>
## **üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è**

–í—Å–µ –ø—Ä–∞–≤–∞ –Ω–∞ –¥–∞–Ω–Ω—ã–π –ø—Ä–æ–µ–∫—Ç –∑–∞—â–∏—â–µ–Ω—ã. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∏ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –≤ –∫–æ–º–º–µ—Ä—á–µ—Å–∫–∏—Ö –∏–ª–∏ –ª–∏—á–Ω—ã—Ö —Ü–µ–ª—è—Ö –±–µ–∑ –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ–≥–æ –ø–∏—Å—å–º–µ–Ω–Ω–æ–≥–æ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –∞–≤—Ç–æ—Ä–∞ –∑–∞–ø—Ä–µ—â–µ–Ω–æ.